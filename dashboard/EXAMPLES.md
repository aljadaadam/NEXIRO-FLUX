# 💡 أمثلة عملية - Practical Examples

## 📋 جدول المحتويات
1. [إعداد مصدر SD-Unlocker](#1-إعداد-مصدر-sd-unlocker)
2. [استيراد منتجات من API](#2-استيراد-منتجات-من-api)
3. [تطبيق نسبة ربح على المنتجات](#3-تطبيق-نسبة-ربح-على-المنتجات)
4. [إضافة منتج يدوياً](#4-إضافة-منتج-يدوياً)
5. [معالجة أخطاء الاستيراد](#5-معالجة-أخطاء-الاستيراد)

---

## 1. إعداد مصدر SD-Unlocker

### السيناريو
أنت تريد إضافة SD-Unlocker كمصدر رئيسي للمنتجات مع نسبة ربح 15%.

### الخطوات المصورة

```
الخطوة 1: الذهاب إلى صفحة المصادر
┌────────────────────────────────────────┐
│ القائمة الجانبية                      │
│  📦 المنتجات ▼                        │
│    ├─ 📋 جميع المنتجات               │
│    └─ 🔌 إدارة المصادر  ← اضغط هنا  │
└────────────────────────────────────────┘

الخطوة 2: إضافة مصدر جديد
┌────────────────────────────────────────┐
│ 🔌 إدارة المصادر الخارجية            │
│                  [➕ إضافة مصدر جديد] │
└────────────────────────────────────────┘

الخطوة 3: ملء البيانات
┌────────────────────────────────────────┐
│ ➕ إضافة مصدر جديد              [×]   │
├────────────────────────────────────────┤
│ اسم المصدر *                          │
│ [sd-unlocker___________________]       │
│                                        │
│ رابط API *                             │
│ [https://sd-unlocker.com/api/index.php]│
│                                        │
│ اسم المستخدم *                        │
│ [aljadadm654___________________]       │
│                                        │
│ مفتاح API *                            │
│ [Z4U-MIH-600-V7V-JNQ-ZTP-W3B-A7W____] │
│                                        │
│ Cookie (اختياري)                       │
│ [DHRUFUSION=9c1d5c465d6a174a_______]   │
│                                        │
│ نسبة الربح الافتراضية (%)             │
│ [15.00__]                              │
│                                        │
│ الوصف                                  │
│ [المصدر الرئيسي لخدمات FRP والأجهزة] │
│                                        │
│ ☑️ تفعيل المصدر                       │
│                                        │
│ [إلغاء] [➕ إضافة المصدر]             │
└────────────────────────────────────────┘

الخطوة 4: اختبار الاتصال (اختياري)
┌────────────────────────────────────────┐
│ 🔍 اختبار الاتصال...                 │
│ ⏳ جاري الاتصال بـ sd-unlocker...     │
└────────────────────────────────────────┘
↓
✅ الاتصال ناجح!

الخطوة 5: الحفظ
┌────────────────────────────────────────┐
│ ✅ تم إضافة المصدر بنجاح!            │
└────────────────────────────────────────┘
```

### النتيجة النهائية

```javascript
{
  id: 1,
  name: "sd-unlocker",
  api_url: "https://sd-unlocker.com/api/index.php",
  username: "aljadadm654",
  api_key: "Z4U-MIH-600-V7V-JNQ-ZTP-W3B-A7W", // مشفر في DB
  cookie: "DHRUFUSION=9c1d5c465d6a174a454a636a826d8803",
  profit_percentage: 15.00,
  enabled: true,
  description: "المصدر الرئيسي لخدمات FRP والأجهزة",
  products_count: 0,
  created_at: "2025-12-11 10:30:00"
}
```

---

## 2. استيراد منتجات من API

### السيناريو
استيراد جميع المنتجات من SD-Unlocker وتصنيفها تلقائياً.

### الخطوات

```
الخطوة 1: فتح نافذة الاستيراد
┌────────────────────────────────────────┐
│ 📦 إدارة المنتجات                    │
│ [📥 استيراد منتجات] [🔄 مزامنة]     │
└────────────────────────────────────────┘
↓ اضغط "استيراد منتجات"

الخطوة 2: اختيار طريقة الاستيراد
┌────────────────────────────────────────┐
│ 📥 استيراد منتجات              [×]   │
├────────────────────────────────────────┤
│ [📥 استيراد من API] [➕ إضافة يدوية] │
│       (محدد)                           │
└────────────────────────────────────────┘

الخطوة 3: إدخال بيانات المصدر
┌────────────────────────────────────────┐
│ اسم المصدر                            │
│ [sd-unlocker___________________]       │
│                                        │
│ رابط API                               │
│ [https://sd-unlocker.com/api/index.php]│
│                                        │
│ اسم المستخدم                          │
│ [aljadadm654___________________]       │
│                                        │
│ مفتاح API                              │
│ [Z4U-MIH-600-V7V-JNQ-ZTP-W3B-A7W____] │
│                                        │
│ [📥 استيراد المنتجات]                │
└────────────────────────────────────────┘

الخطوة 4: العملية
┌────────────────────────────────────────┐
│ ⏳ جاري الاتصال بالمصدر...            │
│ ▓▓▓▓▓▓░░░░░░░░░░ 40%                  │
└────────────────────────────────────────┘
↓
┌────────────────────────────────────────┐
│ ⏳ جاري معالجة البيانات...            │
│ ▓▓▓▓▓▓▓▓▓▓░░░░░░ 70%                  │
└────────────────────────────────────────┘
↓
┌────────────────────────────────────────┐
│ ⏳ جاري حفظ المنتجات...               │
│ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ 100%                 │
└────────────────────────────────────────┘

النتيجة:
┌────────────────────────────────────────┐
│ ✅ تم استيراد 245 منتج بنجاح!        │
│                                        │
│ 🖥️ Server:  145 منتج                 │
│ 📱 IMEI:    75 منتج                  │
│ 🌐 Remote:  25 منتج                  │
└────────────────────────────────────────┘
```

### البيانات المستوردة (مثال)

```javascript
// مثال على منتج مستورد
{
  id: 1,
  sourceName: "sd-unlocker",
  sourceUrl: "https://sd-unlocker.com/api/index.php",
  groupKey: "Dragon_Frp_Tool",
  groupName: "Dragon Frp Tool",
  groupType: "SERVER",
  serviceKey: "20122",
  serviceId: 181103,
  serviceName: "Dragon Frp Samsung/Xiaomi/MTK",
  serviceType: "SERVER",
  basePrice: 0.930,      // السعر من المصدر
  credit: 1.070,         // السعر بعد الربح (0.930 + 15%)
  profitPercentage: 15.00,
  time: "1-5 Minutes",
  info: "Supports Samsung, Xiaomi, and MTK devices",
  customFields: [
    { fieldname: "Username", fieldtype: "text", required: "on" },
    { fieldname: "Password", fieldtype: "text", required: "on" }
  ],
  enabled: true,
  created_at: "2025-12-11 10:35:00"
}

// الـ API يستورد 245 منتج مشابه
```

### استعلام SQL لعرض المنتجات المستوردة

```sql
-- عرض جميع المنتجات من sd-unlocker
SELECT 
  service_name,
  base_price,
  credit,
  profit_percentage,
  (credit - base_price) as profit_amount
FROM products
WHERE source_name = 'sd-unlocker'
ORDER BY group_type, group_name;

-- النتيجة:
+---------------------------------+------------+--------+------------------+---------------+
| service_name                    | base_price | credit | profit_percentage| profit_amount |
+---------------------------------+------------+--------+------------------+---------------+
| Dragon Frp Samsung/Xiaomi/MTK   | 0.930      | 1.070  | 15.00            | 0.140         |
| Samsung S10 FRP                 | 1.500      | 1.725  | 15.00            | 0.225         |
| iPhone IMEI Check               | 0.500      | 0.575  | 15.00            | 0.075         |
| ...                             | ...        | ...    | ...              | ...           |
+---------------------------------+------------+--------+------------------+---------------+
245 rows in set
```

---

## 3. تطبيق نسبة ربح على المنتجات

### السيناريو
تريد زيادة نسبة الربح من 15% إلى 20% على جميع منتجات sd-unlocker.

### الخطوات

```
الخطوة 1: فتح إعدادات المصدر
┌────────────────────────────────────────┐
│ SD-Unlocker               [✅ نشط]     │
│ نسبة الربح: 15%  |  المنتجات: 245    │
│                                        │
│ [💰 تطبيق نسبة الربح] ← اضغط هنا     │
└────────────────────────────────────────┘

الخطوة 2: إدخال النسبة الجديدة
┌────────────────────────────────────────┐
│ 💰 تطبيق نسبة الربح            [×]   │
│ SD-Unlocker                            │
├────────────────────────────────────────┤
│ نسبة الربح (%)                        │
│ [20.00__]                              │
│                                        │
│ ℹ️ سيتم تطبيق نسبة الربح على جميع   │
│    المنتجات المرتبطة بهذا المصدر      │
│    (245 منتج)                         │
│                                        │
│ مثال:                                  │
│ سعر المصدر $1.00 + ربح 20%           │
│ = $1.200                               │
│                                        │
│ [إلغاء] [✅ تطبيق الربح]              │
└────────────────────────────────────────┘

الخطوة 3: التأكيد والتطبيق
┌────────────────────────────────────────┐
│ ⏳ جاري تطبيق نسبة الربح...           │
│ تحديث المنتج 127/245...                │
│ ▓▓▓▓▓▓▓▓░░░░░░░░ 52%                  │
└────────────────────────────────────────┘

النتيجة:
┌────────────────────────────────────────┐
│ ✅ تم تطبيق نسبة الربح 20% على      │
│    245 منتج بنجاح!                    │
└────────────────────────────────────────┘
```

### التغييرات في الأسعار

```javascript
// قبل التطبيق (15%)
[
  { name: "Dragon Frp", basePrice: 0.930, credit: 1.070, profit: 15% },
  { name: "Samsung FRP", basePrice: 1.500, credit: 1.725, profit: 15% },
  { name: "IMEI Check", basePrice: 0.500, credit: 0.575, profit: 15% }
]

// بعد التطبيق (20%)
[
  { name: "Dragon Frp", basePrice: 0.930, credit: 1.116, profit: 20% },
  { name: "Samsung FRP", basePrice: 1.500, credit: 1.800, profit: 20% },
  { name: "IMEI Check", basePrice: 0.500, credit: 0.600, profit: 20% }
]

// الفرق في الربح
[
  { name: "Dragon Frp", oldProfit: 0.140, newProfit: 0.186, increase: +$0.046 },
  { name: "Samsung FRP", oldProfit: 0.225, newProfit: 0.300, increase: +$0.075 },
  { name: "IMEI Check", oldProfit: 0.075, newProfit: 0.100, increase: +$0.025 }
]
```

### استعلام SQL

```sql
-- تطبيق نسبة الربح 20%
UPDATE products
SET 
  credit = base_price * 1.20,
  profit_percentage = 20.00,
  updated_at = NOW()
WHERE source_name = 'sd-unlocker';

-- التحقق من النتيجة
SELECT 
  service_name,
  base_price,
  credit,
  profit_percentage,
  ROUND((credit - base_price), 3) as profit
FROM products
WHERE source_name = 'sd-unlocker'
LIMIT 5;

-- النتيجة:
+---------------------------------+------------+--------+------------------+--------+
| service_name                    | base_price | credit | profit_percentage| profit |
+---------------------------------+------------+--------+------------------+--------+
| Dragon Frp Samsung/Xiaomi/MTK   | 0.930      | 1.116  | 20.00            | 0.186  |
| Samsung S10 FRP                 | 1.500      | 1.800  | 20.00            | 0.300  |
| iPhone IMEI Check               | 0.500      | 0.600  | 20.00            | 0.100  |
+---------------------------------+------------+--------+------------------+--------+
```

---

## 4. إضافة منتج يدوياً

### السيناريو
إضافة خدمة مخصصة غير موجودة في المصدر الخارجي.

### الخطوات

```
الخطوة 1: فتح نافذة الاستيراد
┌────────────────────────────────────────┐
│ 📦 إدارة المنتجات                    │
│ [📥 استيراد منتجات] ← اضغط هنا       │
└────────────────────────────────────────┘

الخطوة 2: اختيار الإضافة اليدوية
┌────────────────────────────────────────┐
│ [📥 استيراد من API] [➕ إضافة يدوية] │
│                        (محدد)          │
└────────────────────────────────────────┘

الخطوة 3: ملء البيانات
┌────────────────────────────────────────┐
│ اسم المجموعة *                        │
│ [Custom Services_____________]         │
│                                        │
│ نوع الخدمة *                           │
│ [🖥️ Server ▼]                         │
│                                        │
│ اسم الخدمة *                           │
│ [Samsung S21 Ultra FRP Unlock_____]    │
│                                        │
│ السعر ($) *          الوقت            │
│ [5.500___]           [24-48 Hours___] │
│                                        │
│ معلومات إضافية                        │
│ [خدمة فتح FRP لجهاز Samsung S21      │
│  Ultra بضمان 100%_________________]   │
│                                        │
│ حقول مخصصة          [+ إضافة حقل]     │
│ ┌────────────────────────────────────┐│
│ │ [IMEI______] [text ▼]  [مطلوب ☑️] ││
│ │ [Model_____] [text ▼]  [مطلوب ☑️] ││
│ │ [Serial____] [text ▼]  [      ☐ ] ││
│ └────────────────────────────────────┘│
│                                        │
│ [إلغاء] [✅ إضافة المنتج]             │
└────────────────────────────────────────┘

النتيجة:
┌────────────────────────────────────────┐
│ ✅ تم إضافة المنتج بنجاح!            │
└────────────────────────────────────────┘
```

### المنتج المضاف

```javascript
{
  id: 246,
  sourceName: null,  // منتج يدوي
  sourceUrl: null,
  groupKey: "Custom_Services",
  groupName: "Custom Services",
  groupType: "SERVER",
  serviceKey: "1702389600000",  // timestamp
  serviceId: 1702389600000,
  serviceName: "Samsung S21 Ultra FRP Unlock",
  serviceType: "SERVER",
  basePrice: 5.500,
  credit: 5.500,
  profitPercentage: 0.00,  // لا يوجد ربح (سعر مباشر)
  time: "24-48 Hours",
  info: "خدمة فتح FRP لجهاز Samsung S21 Ultra بضمان 100%",
  customFields: [
    { fieldname: "IMEI", fieldtype: "text", required: "on" },
    { fieldname: "Model", fieldtype: "text", required: "on" },
    { fieldname: "Serial", fieldtype: "text", required: "off" }
  ],
  enabled: true,
  created_at: "2025-12-11 11:00:00"
}
```

---

## 5. معالجة أخطاء الاستيراد

### السيناريو 1: بيانات اتصال خاطئة

```
المحاولة:
┌────────────────────────────────────────┐
│ اسم المستخدم: wrong_user              │
│ مفتاح API: wrong-key-xxx              │
│ [📥 استيراد المنتجات]                │
└────────────────────────────────────────┘

النتيجة:
┌────────────────────────────────────────┐
│ ❌ خطأ من المصدر: Invalid API Key    │
└────────────────────────────────────────┘
```

**الحل**: تحقق من بيانات الاتصال في صفحة المصادر.

### السيناريو 2: المصدر غير متاح

```
المحاولة:
┌────────────────────────────────────────┐
│ رابط API: https://sd-unlocker.com/... │
│ [📥 استيراد المنتجات]                │
└────────────────────────────────────────┘

النتيجة:
┌────────────────────────────────────────┐
│ ❌ فشل الاتصال بالمصدر (503)          │
└────────────────────────────────────────┘
```

**الحل**: 
1. تحقق من اتصال الإنترنت
2. تأكد من أن المصدر يعمل
3. حاول مرة أخرى لاحقاً

### السيناريو 3: لا توجد منتجات

```
المحاولة:
┌────────────────────────────────────────┐
│ [📥 استيراد المنتجات]                │
└────────────────────────────────────────┘

النتيجة:
┌────────────────────────────────────────┐
│ ❌ لم يتم العثور على منتجات صالحة   │
│    للاستيراد                           │
└────────────────────────────────────────┘
```

**الحل**: تحقق من أن حسابك في المصدر يحتوي على منتجات.

### السيناريو 4: فشل الاتصال بالسيرفر

```
الصفحة تعرض:
┌────────────────────────────────────────┐
│ ⚠️ تحذير: فشل الاتصال بالسيرفر       │
│ يتم عرض البيانات المحفوظة محلياً      │
│                  [🔄 إعادة المحاولة]  │
└────────────────────────────────────────┘

القائمة تعرض البيانات القديمة ✅
```

**الحل**: 
1. اضغط "إعادة المحاولة"
2. تحقق من Backend
3. يمكنك الاستمرار في العمل بالبيانات المحفوظة

---

## 📊 تقارير ومتابعة

### عرض إحصائيات شاملة

```sql
-- إحصائيات المصادر
SELECT 
  s.name,
  s.profit_percentage,
  COUNT(p.id) as products_count,
  SUM(p.base_price) as total_cost,
  SUM(p.credit) as total_revenue,
  SUM(p.credit - p.base_price) as total_profit
FROM sources s
LEFT JOIN products p ON s.name = p.source_name
GROUP BY s.id;

-- النتيجة:
+-------------+------------------+----------------+------------+--------------+--------------+
| name        | profit_percentage| products_count | total_cost | total_revenue| total_profit |
+-------------+------------------+----------------+------------+--------------+--------------+
| sd-unlocker | 20.00            | 245            | 327.50     | 393.00       | 65.50        |
+-------------+------------------+----------------+------------+--------------+--------------+
```

### أفضل المنتجات ربحاً

```sql
SELECT 
  service_name,
  base_price,
  credit,
  (credit - base_price) as profit,
  ROUND(((credit - base_price) / base_price) * 100, 2) as profit_percentage
FROM products
WHERE source_name = 'sd-unlocker'
ORDER BY profit DESC
LIMIT 10;
```

---

**نهاية الأمثلة العملية** 🎉

للمزيد من المعلومات، راجع:
- `IMPROVEMENTS-SUMMARY.md` - ملخص التحسينات
- `SOURCES-MANAGEMENT-GUIDE.md` - دليل إدارة المصادر
- `IMPORT-PRODUCTS-SYSTEM.md` - نظام الاستيراد
